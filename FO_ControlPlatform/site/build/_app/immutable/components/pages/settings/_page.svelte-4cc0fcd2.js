import{S as W,i as Z,s as $,k as _,q,a as N,l as g,m as b,r as H,h as f,c as R,n as y,b as Q,G as l,L as I,B as z,O as x,N as ee,o as te,u as se}from"../../../chunks/index-a0b633f8.js";function F(i,a,s){const t=i.slice();return t[6]=a[s][0],t[7]=a[s][1],t}function K(i){let a,s,t=i[6]+"",m,p,h,u,T,e,c,j;function E(...v){return i[3](i[6],...v)}return{c(){a=_("tr"),s=_("td"),m=q(t),p=N(),h=_("td"),u=_("input"),e=N(),this.h()},l(v){a=g(v,"TR",{});var o=b(a);s=g(o,"TD",{class:!0});var D=b(s);m=H(D,t),D.forEach(f),p=R(o),h=g(o,"TD",{class:!0});var k=b(h);u=g(k,"INPUT",{type:!0,class:!0,placeholder:!0}),k.forEach(f),e=R(o),o.forEach(f),this.h()},h(){y(s,"class","border text-blue-900 font-semibold"),y(u,"type","text"),y(u,"class","justify-end placeholder-opacity-50 focus:placeholder-opacity-0 placeholder-black"),y(u,"placeholder","Enter a new value"),u.value=T=i[7],y(h,"class","border")},m(v,o){Q(v,a,o),l(a,s),l(s,m),l(a,p),l(a,h),l(h,u),l(a,e),c||(j=I(u,"input",E),c=!0)},p(v,o){i=v,o&1&&t!==(t=i[6]+"")&&se(m,t),o&1&&T!==(T=i[7])&&u.value!==T&&(u.value=T)},d(v){v&&f(a),c=!1,j()}}}function ae(i){let a,s,t,m,p,h,u,T,e,c,j,E,v,o,D,k,S,A,C,J,B=Object.entries(i[0]),d=[];for(let r=0;r<B.length;r+=1)d[r]=K(F(i,B,r));return{c(){a=_("div"),s=_("div"),t=_("table"),m=_("thead"),p=_("tr"),h=_("th"),u=q("Setting"),T=N(),e=_("th"),c=q("Value"),j=N(),E=_("tbody");for(let r=0;r<d.length;r+=1)d[r].c();v=N(),o=_("button"),D=q("Save"),k=N(),S=_("button"),A=q("Reset To Default Settings"),this.h()},l(r){a=g(r,"DIV",{class:!0});var w=b(a);s=g(w,"DIV",{class:!0});var n=b(s);t=g(n,"TABLE",{class:!0});var O=b(t);m=g(O,"THEAD",{});var L=b(m);p=g(L,"TR",{});var P=b(p);h=g(P,"TH",{class:!0});var U=b(h);u=H(U,"Setting"),U.forEach(f),T=R(P),e=g(P,"TH",{class:!0});var M=b(e);c=H(M,"Value"),M.forEach(f),P.forEach(f),L.forEach(f),j=R(O),E=g(O,"TBODY",{});var G=b(E);for(let V=0;V<d.length;V+=1)d[V].l(G);G.forEach(f),O.forEach(f),v=R(n),o=g(n,"BUTTON",{class:!0});var X=b(o);D=H(X,"Save"),X.forEach(f),k=R(n),S=g(n,"BUTTON",{class:!0});var Y=b(S);A=H(Y,"Reset To Default Settings"),Y.forEach(f),n.forEach(f),w.forEach(f),this.h()},h(){y(h,"class","border"),y(e,"class","border"),y(t,"class","table-auto overflow-x-scroll table-normal"),y(o,"class","btn w-full"),y(S,"class","btn btn-warning w-full"),y(s,"class","flex flex-col justify-center "),y(a,"class","sm:grid place-content-center")},m(r,w){Q(r,a,w),l(a,s),l(s,t),l(t,m),l(m,p),l(p,h),l(h,u),l(p,T),l(p,e),l(e,c),l(t,j),l(t,E);for(let n=0;n<d.length;n+=1)d[n].m(E,null);l(s,v),l(s,o),l(o,D),l(s,k),l(s,S),l(S,A),C||(J=[I(o,"click",i[1]),I(S,"click",i[2])],C=!0)},p(r,[w]){if(w&1){B=Object.entries(r[0]);let n;for(n=0;n<B.length;n+=1){const O=F(r,B,n);d[n]?d[n].p(O,w):(d[n]=K(O),d[n].c(),d[n].m(E,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=B.length}},i:z,o:z,d(r){r&&f(a),x(d,r),C=!1,ee(J)}}}function ne(i,a,s){var t={ch1_pin:"",ch2_pin:"",ch3_pin:"",ch4_pin:"",sda_sht_pin:"",scl_sht_pin:"",rx_solar_pin:"",beacon_pin:"",thingname:"",ap_name:"",ap_pass:"",mqtt_host:"",fast_blink_on_duration:""};const m=async()=>{try{const c=await fetch("/api/get-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:'"cmd":"get_settings"'});console.log(c),s(0,t=await c.json()),console.log(t)}catch{var e=new XMLHttpRequest;e.onreadystatechange=function(){e.readyState==4&&(e.status==200?(console.log(e.statusText),console.log(e.responseText),console.log(e.responseType),console.log(e.response),s(0,t=JSON.parse(e.responseText.match(/{(.*?)}/)[0]))):e.status==0)},e.open("POST","/api/get-settings",!0),e.setRequestHeader("Content-type","application/json"),e.send('"cmd":"get_settings"')}};te(()=>{m()});const p=async e=>{let c={cmd:e,settings:{}};c.settings=t,console.log(JSON.stringify(c)),await fetch("/api/change-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})};function h(){confirm(`Are you sure you want to change and save these settings? 
The device will restart and this page will refresh in 10s if yes.`)&&p("change_settings")}function u(){confirm(`Are you sure you want to reset the device to factory default settings? 
The device will restart and this page will refresh in 10s if yes.`)&&p("reset_settings")}return[t,h,u,(e,c)=>{s(0,t[e]=c.target.value,t)}]}class oe extends W{constructor(a){super(),Z(this,a,ne,ae,$,{})}}export{oe as default};
