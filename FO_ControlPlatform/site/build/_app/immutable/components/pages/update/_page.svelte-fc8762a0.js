import{S as N,i as C,s as H,k as r,q as A,a as y,l as i,m as c,r as D,h as n,c as I,n as l,b as $,G as a,L as j,B as F}from"../../../chunks/index-a0b633f8.js";function z(b){let e,d,t,m,h,u,f,T,B,p,S,v,o,U,w,_,P,V;return{c(){e=r("div"),d=r("div"),t=r("h1"),m=A("ESP32 OTA Firmware Update"),h=y(),u=r("div"),f=r("label"),T=A("Firmware file:"),B=y(),p=r("input"),S=y(),v=r("div"),o=r("button"),U=A("Upload"),w=y(),_=r("div"),this.h()},l(g){e=i(g,"DIV",{class:!0});var s=c(e);d=i(s,"DIV",{class:!0});var k=c(d);t=i(k,"H1",{});var L=c(t);m=D(L,"ESP32 OTA Firmware Update"),L.forEach(n),k.forEach(n),h=I(s),u=i(s,"DIV",{});var E=c(u);f=i(E,"LABEL",{class:!0,for:!0});var O=c(f);T=D(O,"Firmware file:"),O.forEach(n),B=I(E),p=i(E,"INPUT",{type:!0,id:!0,name:!0,class:!0}),E.forEach(n),S=I(s),v=i(s,"DIV",{class:!0});var q=c(v);o=i(q,"BUTTON",{class:!0,id:!0,type:!0});var x=c(o);U=D(x,"Upload"),x.forEach(n),q.forEach(n),w=I(s),_=i(s,"DIV",{id:!0}),c(_).forEach(n),s.forEach(n),this.h()},h(){l(d,"class","text-blue-900 mb-3 text-xl font-semibold"),l(f,"class","text-blue-900 font-bold mr-10"),l(f,"for","otafile"),l(p,"type","file"),l(p,"id","otafile"),l(p,"name","otafile"),l(p,"class","file-input file-input-bordered"),l(o,"class","btn mt-10"),l(o,"id","upload"),l(o,"type","button"),l(v,"class","justify-center"),l(_,"id","progress"),l(e,"class","grid place-items-center")},m(g,s){$(g,e,s),a(e,d),a(d,t),a(t,m),a(e,h),a(e,u),a(u,f),a(f,T),a(u,B),a(u,p),a(e,S),a(e,v),a(v,o),a(o,U),a(e,w),a(e,_),P||(V=j(o,"click",b[0]),P=!0)},p:F,i:F,o:F,d(g){g&&n(e),P=!1,V()}}}function G(){var b=document.getElementById("otafile"),e=b.files;if(console.log("filesize: ",e.length),e.length==0)alert("No file selected!");else{document.getElementById("otafile").setAttribute("disabled","true"),document.getElementById("upload").setAttribute("disabled","true");var d=e[0],t=new XMLHttpRequest;t.onreadystatechange=function(){t.readyState==4&&(t.status==200?(document.open(),document.write(t.responseText),document.close()):t.status==0?(alert("Server closed the connection abruptly!"),location.reload()):(alert(t.status+` Error!
`+t.responseText),location.reload()))},t.upload.onprogress=function(m){var h=document.getElementById("progress");h.textContent="Progress: "+(m.loaded/m.total*100).toFixed(0)+"%"},t.open("POST","/api/update",!0),t.send(d)}}function M(b){return[()=>G()]}class X extends N{constructor(e){super(),C(this,e,M,z,H,{})}}export{X as default};
